import React,{useEffect,useState} from 'react'; import api from '../../api';
export default function AdminCategories(){ const [rows,setRows]=useState([]); const [form,setForm]=useState({name:'',slug:''}); const load=()=>api.get('/api/admin/categories').then(r=>setRows(r.data)); useEffect(()=>{ load(); },[]);
  const add=async()=>{ if(!form.name||!form.slug) return; await api.post('/api/admin/categories', form); setForm({name:'',slug:''}); load(); };
  const edit=async(c)=>{ await api.patch(`/api/admin/categories/${c.id}`, { name:c.name, slug:c.slug }); load(); };
  const del=async(id)=>{ if(confirm('Supprimer ?')){ await api.delete(`/api/admin/categories/${id}`); load(); } };
  return (<div className="bg-white rounded-2xl p-6 shadow"><h2 className="text-2xl font-bold mb-4">Cat√©gories</h2><div className="flex gap-2 mb-4"><input placeholder="Nom" className="border rounded px-3 py-2" value={form.name} onChange={e=>setForm({...form,name:e.target.value})}/><input placeholder="slug" className="border rounded px-3 py-2" value={form.slug} onChange={e=>setForm({...form,slug:e.target.value})}/><button onClick={add} className="px-4 rounded bg-indigo-600 text-white">Ajouter</button></div><table className="w-full text-sm"><thead><tr className="text-left border-b"><th>Nom</th><th>Slug</th><th></th></tr></thead><tbody>{rows.map(c=>(<tr key={c.id} className="border-b last:border-0"><td><input defaultValue={c.name} onChange={e=>c.name=e.target.value} className="border rounded px-2"/></td><td><input defaultValue={c.slug} onChange={e=>c.slug=e.target.value} className="border rounded px-2"/></td><td className="text-right"><button onClick={()=>edit(c)} className="px-3 py-1 rounded border">Enregistrer</button><button onClick={()=>del(c.id)} className="ml-2 px-3 py-1 rounded border text-red-600">Supprimer</button></td></tr>))}</tbody></table></div>) }