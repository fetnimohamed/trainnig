import React,{useEffect,useState} from 'react'; import { Outlet, Link, useNavigate } from 'react-router-dom'; import api from '../../api';
export default function AdminLayout(){ const [me,setMe]=useState(null); const navigate=useNavigate();
  useEffect(()=>{ api.get('/api/users/me').then(r=>{ if(r.data?.role!=='admin') navigate('/login'); setMe(r.data); }).catch(()=>navigate('/login')); },[]);
  if(!me) return <div>Chargement...</div>;
  return (<div className="grid md:grid-cols-5 gap-6"><aside className="md:col-span-1 bg-white rounded-2xl p-4 shadow h-fit sticky top-24"><div className="font-semibold">Administration</div><nav className="mt-3 flex flex-col gap-2"><Link to="/admin" className="hover:text-indigo-700">Dashboard</Link><Link to="/admin/users" className="hover:text-indigo-700">Utilisateurs</Link><Link to="/admin/categories" className="hover:text-indigo-700">Catégories</Link><Link to="/admin/courses" className="hover:text-indigo-700">Formations</Link><Link to="/admin/lessons" className="hover:text-indigo-700">Leçons & Images</Link><Link to="/admin/packs" className="hover:text-indigo-700">Packs</Link><Link to="/admin/promos" className="hover:text-indigo-700">Promos</Link></nav></aside><main className="md:col-span-4"><Outlet/></main></div>); }